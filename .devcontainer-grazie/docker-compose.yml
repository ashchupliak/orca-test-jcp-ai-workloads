services:
  app:
    build:
      context: ../..
      dockerfile: .devcontainer-grazie/Dockerfile

    # Publish port 8000 to the worker container's localhost
    # This allows frp proxy to reach Grazie at 127.0.0.1:8000
    ports:
      - "8000:8000"

    volumes:
      - ..:/workspace:cached

    command: sleep infinity

    environment:
      PYTHONPATH: /workspace
      WORKSPACE_ROOT: /workspace
